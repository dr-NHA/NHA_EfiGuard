using NHADSE;
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;
using System.Windows.Forms;

namespace N_EFI{
internal static class Program{

/// <summary>
/// The main entry point for the application.
/// </summary>
[STAThread]
static void Main(string[] A){
dynamic ERRORDATA =
#if DEBUG
@"echo off
title NHA EFI DSE ERROR:
cls
echo Please Dont Bypass The Admin Perms As They Are Crucial!
pause
del -f NHAEFIDSE_ERROR.bat";
#else
Encoding.Default.GetString(new byte[] {
0x65,0x63,0x68,0x6F,0x20,0x6F,0x66,0x66,0x0D,0x0A,0x74,0x69,0x74,0x6C,0x65,0x20,0x4E,0x48,0x41,0x20,0x45,0x46,0x49,0x20,0x44,0x53,0x45,0x20,0x45,0x52,0x52,0x4F,0x52,0x3A,0x0D,0x0A,0x63,0x6C,0x73,0x0D,0x0A,0x65,0x63,0x68,0x6F,0x20,0x50,0x6C,0x65,0x61,0x73,0x65,0x20,0x44,0x6F,0x6E,0x74,0x20,0x42,0x79,0x70,0x61,0x73,0x73,0x20,0x54,0x68,0x65,0x20,0x41,0x64,0x6D,0x69,0x6E,0x20,0x50,0x65,0x72,0x6D,0x73,0x20,0x41,0x73,0x20,0x54,0x68,0x65,0x79,0x20,0x41,0x72,0x65,0x20,0x43,0x72,0x75,0x63,0x69,0x61,0x6C,0x21,0x0D,0x0A,0x70,0x61,0x75,0x73,0x65,0x0D,0x0A,0x64,0x65,0x6C,0x20,0x2D,0x66,0x20,0x4E,0x48,0x41,0x45,0x46,0x49,0x44,0x53,0x45,0x5F,0x45,0x52,0x52,0x4F,0x52,0x2E,0x62,0x61,0x74
});
#endif

//File.WriteAllText("ERRORDATA.bytes.txt", Encoding.Default.GetBytes((string)ERRORDATA).ToFormattedString().Replace(" ",","));
//Process.Start(Environment.CurrentDirectory + "\\ERRORDATA.bytes.txt");

if (!Utilitys.IsAdmin){
try{
File.WriteAllText(Environment.CurrentDirectory + "\\NHAEFIDSE_ERROR.bat", ERRORDATA);
Process.Start(Environment.CurrentDirectory + "\\NHAEFIDSE_ERROR.bat");
}catch (Exception ex){
}
Environment.Exit(0);
return;
}
GC.Collect(GC.GetGeneration(ERRORDATA),GCCollectionMode.Forced);
ERRORDATA=null;
NDSE_Core.SetupNDSE();
GC.Collect();
if (A != null ? A.Length > 0 : false)
Environment.CurrentDirectory = A[0];
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(new MainUI());
}





}}